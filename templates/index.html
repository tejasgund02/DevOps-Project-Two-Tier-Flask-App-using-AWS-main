<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student Registration</title>
    <style>
      :root{
        --bg:#f6f9fc;
        --card:#ffffff;
        --accent:#2b6cb0;
        --muted:#6b7280;
        --success:#16a34a;
        --danger:#dc2626;
        --radius:10px;
        --shadow: 0 6px 18px rgba(22, 27, 34, 0.08);
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      }

      html,body{height:100%;margin:0;background:linear-gradient(180deg,#eef2f7 0%,var(--bg) 100%);color:#111827}
      .container{max-width:980px;margin:36px auto;padding:28px}
      .card{background:var(--card);border-radius:var(--radius);box-shadow:var(--shadow);padding:22px}

      .header{display:flex;align-items:center;justify-content:space-between;margin-bottom:18px}
      h2{margin:0;font-size:1.25rem;color:var(--accent)}
      .subtle{color:var(--muted);font-size:0.95rem}

      form.registration{display:grid;grid-template-columns:1fr 1fr;gap:12px 18px;margin-top:12px}
      form.registration label{display:block;font-size:0.9rem;color:var(--muted);margin-bottom:6px}
      form.registration input[type="text"], form.registration input[type="password"]{
        width:100%;padding:10px 12px;border:1px solid #e6e9ee;border-radius:8px;font-size:0.95rem;background:#fbfdff;box-sizing:border-box
      }
      .full{grid-column:1 / -1}

      .actions{display:flex;gap:10px;align-items:center;margin-top:6px}
      button[type="submit"]{background:var(--accent);color:white;border:none;padding:10px 16px;border-radius:8px;cursor:pointer;font-weight:600}
      button[type="submit"]:hover{filter:brightness(0.95)}

      hr {border:0;height:1px;background:#eef2f6;margin:22px 0}

      /* Flash messages */
      ul.flashes{list-style:none;padding:0;margin:0 0 10px 0;display:flex;flex-direction:column;gap:8px}
      ul.flashes li{padding:10px 14px;border-radius:8px;font-size:0.95rem}
      ul.flashes li.success{background:linear-gradient(90deg,#ecfdf5,#d1fae5);color:var(--success);border:1px solid rgba(22,163,74,0.12)}
      ul.flashes li.error{background:linear-gradient(90deg,#fff1f2,#fee2e2);color:var(--danger);border:1px solid rgba(220,38,38,0.08)}
      ul.flashes li.info{background:#eef2ff;color:var(--accent);border:1px solid rgba(43,108,176,0.06)}

      /* Table */
      .table-wrapper{overflow:auto;margin-top:8px}
      table.reg-table{width:100%;border-collapse:collapse;background:transparent}
      table.reg-table th, table.reg-table td{padding:10px 12px;text-align:left;border-bottom:1px solid #f1f5f9;font-size:0.95rem}
      table.reg-table th{background:transparent;color:var(--muted);font-weight:600}
      table.reg-table tr:hover td{background:#fbfcff}

      @media (max-width:720px){
        form.registration{grid-template-columns:1fr}
        .header{flex-direction:column;align-items:flex-start;gap:8px}
      }
    </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <h2>Register Student</h2>
        <div class="subtle">Add a new student to the system</div>
      </div>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <ul class="flashes">
          {% for category, message in messages %}
            <li class="{{ category }}">{{ message }}</li>
          {% endfor %}
          </ul>
        {% endif %}
      {% endwith %}

      <form method="POST" class="registration">
          <div>
            <label>Username:</label>
            <input type="text" name="username">
          </div>
          <div>
            <label>Address:</label>
            <input type="text" name="address">
          </div>

          <div>
            <label>Password:</label>
            <input type="password" name="password">
          </div>
          <div>
            <label>School:</label>
            <input type="text" name="school">
          </div>

          <div class="full actions">
            <button type="submit">Save Details</button>
          </div>
      </form>

      <hr>
      <h3 style="margin:0 0 10px 0">Registered Users</h3>
      <div class="table-wrapper">
        <table class="reg-table">
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Address</th>
                <th>School</th>
            </tr>
            {% for user in users %}
            <tr>
                <td>{{ user.id }}</td>
                <td>{{ user.username }}</td>
                <td>{{ user.address }}</td>
                <td>{{ user.school }}</td>
            </tr>
            {% endfor %}
        </table>
      </div>
    </div>
  </div>
</body>
</html>
